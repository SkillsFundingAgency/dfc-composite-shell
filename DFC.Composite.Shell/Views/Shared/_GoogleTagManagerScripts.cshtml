@model PageViewModelResponse;
@using DFC.Composite.Shell.Services.Google;
@inject Microsoft.Extensions.Options.IOptions<GoogleSettings> googleSettings
<!-- Page-hiding snippet (recommended)  -->

<script nws-csp-add-nonce="true">
    (function (a, s, y, n, c, h, i, d, e) {
        s.className += ' ' + y; h.start = 1 * new Date;
        h.end = i = function () { s.className = s.className.replace(RegExp(' ?' + y), '') };
        (a[n] = a[n] || []).hide = h; setTimeout(function () { i(); h.end = null }, c); h.timeout = c;
    })(window, document.documentElement, 'async-hide', 'dataLayer', 4000,
        { 'GTM-554PPX9': true });
</script>
<!-- Google Optimize snippet -->

@{var OptimizeId = googleSettings.Value.OptimizeId;}
<script nws-csp-add-nonce="true" async src="https://www.googleoptimize.com/optimize.js?id=@OptimizeId"></script>

<!-- Google Tag Manager -->
<script nws-csp-add-nonce="true">
    (function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        }); var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl; var n = d.querySelector('[nonce]');
        n && j.setAttribute('nonce', n.nonce || n.getAttribute('nonce')); f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-554PPX9');
</script>
<!-- End Google Tag Manager -->
@using DFC.Composite.Shell.Models.Common;
@{
    var versionedPathForJavaScripts = ViewData["VersionedPathForJavaScripts"] as List<string>;

    foreach (var script in versionedPathForJavaScripts)
    {
        <script src="@script" type="text/javascript" nws-csp-add-nonce="true"></script>
    }

    bool webchatEnabled = ViewData["WebchatEnabled"].ToString().Equals("true", StringComparison.OrdinalIgnoreCase);
    var versionedPathForWebChatJs = ViewData["VersionedPathForWebChatJs"]?.ToString();

    if (webchatEnabled && !string.IsNullOrWhiteSpace(versionedPathForWebChatJs))
    {
        var webChatUri = new Uri(versionedPathForWebChatJs, UriKind.Absolute);
        var shellWebchatDomain = webChatUri.Scheme + "://" + webChatUri.Host + ":" + webChatUri.Port;

        <script src="@versionedPathForWebChatJs" nws-csp-add-nonce="true"></script>

        <script nws-csp-add-nonce="true">window.compUiShell.activateWebChat("@shellWebchatDomain")</script>
    }
}

<script nws-csp-add-nonce="true">window.GOVUKFrontend.initAll()</script>